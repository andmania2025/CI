---
description: テスト哲学とガイドライン、Vitest/React Testing Library/Playwrightの使用方法
---

### テスト哲学

- 私たちの目標は、脆くなることなくアプリケーションの動作に自信を持てるようなテストを書くことです。
- 単純なコンポーネントの単体テストよりも、重要なユーザーフローの統合テストを優先します。

### ツール

- **テストランナー:** Vitest
- **コンポーネントテスト:** React Testing Library (`@testing-library/react`)
- **エンドツーエンド (E2E) テスト:** Playwright

### ガイドライン

1. **クエリ:** 非同期要素には `findBy*`、存在が期待される要素には `getBy*`、要素の不在をアサートするには `queryBy*` を使用してください。
2. **ユーザーインタラクション:** 実際のブラウザの動作により近いため、ユーザーインタラクションのシミュレーションには常に `@testing-library/user-event` を使用してください。
3. **モック:** モジュールやAPIリクエストのモックにはVitestの `vi.mock` を使用してください。
4. **テストカバレッジ:** 重要なビジネスロジックに対して妥当なテストカバレッジ（例: >70%）を目指しますが、100%のカバレッジという虚栄心を追い求めないでください。
5. **テスト命名:** テストの説明は明確にし、ユーザーの視点から期待される結果を記述してください。（例: `it('should display an error message when the form is submitted with an invalid email')` -> `it('無効なメールアドレスでフォームが送信された場合、エラーメッセージを表示すべき')`）。
6. **React 19 テスト:** 自動バッチ処理の改善や強化された並行機能など、React 19機能との互換性を確保してください。
