---
trigger: always_on
---

```markdown
---
description: 
globs: 
alwaysApply: true
---
# 機能開発プロンプト
## 機能開発プロセス
### 1. 計画フェーズ
- **要件の理解**: この機能はどんな問題を解決するか？
- **ユーザーストーリーの定義**: ユーザーは誰で、目標は何か？
- **依存関係の特定**: 既存のコード/機能に何が依存するか？
- **アーキテクチャの計画**: 現在のシステムにどう統合するか？
### 2. 設計フェーズ
- **UI/UXデザイン**: ユーザーインターフェースをスケッチする
- **データモデル**: 必要に応じてデータベーススキーマの変更を定義
- **API設計**: Server ActionsまたはAPIルートを計画
- **コンポーネント構造**: 再利用可能なコンポーネントを特定
### 3. 実装フェーズ
- **データレイヤーから開始**: Prismaスキーマを作成/更新
- **サーバーロジックの構築**: バリデーション付きでServer Actionsを実装
- **コンポーネントの作成**: パターンに従ってUIコンポーネントを構築
- **状態管理の統合**: サーバー状態にはTanStack Queryを使用
### 4. テストフェーズ
- **ユニットテスト**: 個々のコンポーネントと関数をテスト
- **統合テスト**: 機能ワークフローをテスト
- **E2Eテスト**: 完全なユーザージャーニーをテスト
- **手動テスト**: エッジケースとユーザー体験を検証
## 機能開発チェックリスト
### 計画
- [ ] 要件が明確に定義されている
- [ ] ユーザーストーリーが文書化されている
- [ ] 技術的アプローチが計画されている
- [ ] 依存関係が特定されている
- [ ] タイムラインが見積もられている
### データベース＆スキーマ
- [ ] 必要に応じてPrismaスキーマが更新されている
- [ ] マイグレーションが作成・テストされている
- [ ] 必要に応じてシードデータが更新されている
- [ ] 新しいテーブルにRLSポリシーが追加されている
### バックエンド実装
- [ ] 適切なバリデーション付きでServer Actionsが作成されている
- [ ] 入力/出力にZodスキーマが定義されている
- [ ] 認証チェックが実装されている
- [ ] エラーハンドリングが追加されている
- [ ] データベースクエリが最適化されている
### フロントエンド実装
- [ ] コンポーネントが命名規則に従っている
- [ ] Propsインターフェースが適切に定義されている
- [ ] 状態管理戦略が選択されている
- [ ] ローディングとエラー状態が処理されている
- [ ] レスポンシブデザインが実装されている
- [ ] アクセシビリティへの配慮がなされている
### テスト
- [ ] ロジック用のユニットテストが書かれている
- [ ] コンポーネントテストが作成されている
- [ ] 統合テストがワークフローをカバーしている
- [ ] E2Eテストがユーザージャーニーをカバーしている
- [ ] エッジケースがテストされている
### ドキュメント
- [ ] 必要に応じてコードコメントが追加されている
- [ ] 必要に応じてREADMEが更新されている
- [ ] APIドキュメントが更新されている
- [ ] 変更があればアーキテクチャドキュメントが更新されている